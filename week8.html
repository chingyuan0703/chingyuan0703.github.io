<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 8: Emotion Vending Machine</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #2d3436;
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
        }

        h1 { color: #ffeaa7; margin-bottom: 20px; letter-spacing: 2px; text-shadow: 0 0 10px rgba(255, 234, 167, 0.5); }

        /* è²©è³£æ©Ÿæœ¬é«” */
        .machine {
            width: 300px;
            height: 500px;
            background: linear-gradient(180deg, #ff7675 0%, #d63031 100%);
            border-radius: 20px 20px 0 0;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            border: 4px solid #b33939;
            border-bottom: none;
        }

        /* æ«¥çª— */
        .window {
            width: 240px;
            height: 200px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            place-items: center;
            padding: 10px;
            margin-bottom: 20px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        .drink {
            width: 40px;
            height: 60px;
            background: #74b9ff;
            border-radius: 5px;
            position: relative;
        }
        .drink::after { content: ''; position: absolute; top: 10px; left: 5px; width: 30px; height: 15px; background: rgba(255,255,255,0.3); border-radius: 2px;}

        /* è¼¸å…¥ç…©æƒ±å€ */
        .input-area {
            width: 240px;
            background: #2d3436;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        textarea {
            width: 100%;
            height: 60px;
            background: #636e72;
            border: none;
            border-radius: 5px;
            color: white;
            padding: 10px;
            box-sizing: border-box;
            resize: none;
        }
        textarea::placeholder { color: #b2bec3; font-size: 0.8rem; }

        button {
            width: 100%;
            padding: 10px;
            background: #ffeaa7;
            border: none;
            border-radius: 20px;
            color: #d63031;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.95); }

        /* å–ç‰©å£ */
        .pickup-slot {
            width: 200px;
            height: 60px;
            background: #2d3436;
            margin-top: auto;
            margin-bottom: 30px;
            border-radius: 10px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            box-shadow: inset 0 5px 10px rgba(0,0,0,0.5);
            overflow: visible; /* è®“æ‰å‡ºä¾†çš„é£²æ–™å¯è¦‹ */
        }

        /* æ‰å‡ºä¾†çš„é£²æ–™ (åˆå§‹éš±è—) */
        .dropped-item {
            width: 50px;
            height: 80px;
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            border-radius: 8px;
            position: absolute;
            bottom: 10px;
            transform: translateY(-200px) rotate(0deg);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 10;
        }

        .dropped-item.fall {
            opacity: 1;
            transform: translateY(0) rotate(10deg);
        }

        /* ç±¤è©©å¡ç‰‡ */
        .message-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            text-align: center;
            width: 80%;
            max-width: 300px;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
        }
        
        .message-card.show { transform: translate(-50%, -50%) scale(1); }
        .close-btn { margin-top: 20px; background: #2d3436; color: white; width: auto; padding: 8px 20px; }

        /* å‹•ç•« */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .machine.working { animation: shake 0.5s infinite; }

    </style>
</head>
<body>

    <h1>Emotion Vending Machine</h1>

    <div class="machine" id="machine">
        <div class="window">
            <div class="drink" style="background:#fab1a0"></div>
            <div class="drink" style="background:#81ecec"></div>
            <div class="drink" style="background:#74b9ff"></div>
            <div class="drink" style="background:#a29bfe"></div>
            <div class="drink" style="background:#ffeaa7"></div>
            <div class="drink" style="background:#55efc4"></div>
        </div>

        <div class="input-area">
            <textarea id="worryInput" placeholder="åœ¨é€™è£¡è¼¸å…¥ä½ çš„ç…©æƒ±..."></textarea>
            <button onclick="insertCoin()">æŠ•å…¥ç…©æƒ± (Insert)</button>
        </div>

        <div class="pickup-slot">
            <div class="dropped-item" id="product" onclick="openProduct()">ğŸ</div>
        </div>
    </div>

    <div class="message-card" id="card">
        <h3 style="color:#6c5ce7">ä¾†è‡ªè²©è³£æ©Ÿçš„æ‚„æ‚„è©±</h3>
        <p id="msgText" style="color:#636e72; line-height:1.6; font-size:1.1rem;">é€™è£¡æœƒé¡¯ç¤ºå®‰æ…°çš„è©±</p>
        <button class="close-btn" onclick="closeCard()">æ”¶ä¸‹å‹‡æ°£</button>
    </div>

    <script>
        const machine = document.getElementById('machine');
        const product = document.getElementById('product');
        const card = document.getElementById('card');
        const msgText = document.getElementById('msgText');
        const input = document.getElementById('worryInput');

        const messages = [
            "ç¾åœ¨çš„å›°é›£ï¼Œæ˜¯ç‚ºäº†æŠŠæœªä¾†çš„ä½ æ‰“ç£¨å¾—æ›´é–ƒäº®ã€‚",
            "ä¼‘æ¯ä¸€ä¸‹ä¹Ÿæ²’é—œä¿‚ï¼Œä¸–ç•Œä¸æœƒå› ç‚ºä½ åœä¸‹äº”åˆ†é˜å°±å´©å¡Œã€‚",
            "ä½ çš„ç„¦æ…®ä¾†è‡ªæ–¼ä½ çš„ä¸Šé€²å¿ƒï¼Œè«‹å°è‡ªå·±æº«æŸ”ä¸€é»ã€‚",
            "æ·±å‘¼å¸ã€‚é€™ä»¶äº‹åœ¨äº”å¹´å¾Œçœ‹ä¾†ï¼Œå¯èƒ½åªæ˜¯ä¸€å€‹ç¬‘è©±ã€‚",
            "å…è¨±è‡ªå·±ä¸å®Œç¾ï¼Œæ˜¯å¼·å¤§çš„äººæ‰æœ‰çš„ç‰¹æ¬Šã€‚",
            "å»å–æ¯æ°´å§ï¼Œå¤§è…¦ç¼ºæ°´çš„æ™‚å€™å®¹æ˜“èƒ¡æ€äº‚æƒ³ã€‚",
            "ä½ æ˜¯è¢«æ„›çš„ï¼Œå³ä½¿ä½ ç¾åœ¨æ„Ÿè¦ºä¸åˆ°ã€‚"
        ];

        function insertCoin() {
            if (input.value.trim() === "") {
                input.placeholder = "è«‹å…ˆè¼¸å…¥ä¸€é»ä»€éº¼...";
                return; // ç©ºçš„ä¸èƒ½æŠ•
            }

            // 1. æ¸…ç©ºç…©æƒ±
            input.value = "";
            input.placeholder = "ç…©æƒ±å·²è¢«åå™¬...";

            // 2. æ©Ÿå™¨é‹ä½œ (éœ‡å‹•)
            machine.classList.add('working');
            
            // 3. å»¶é²å¾Œæ‰è½å•†å“
            setTimeout(() => {
                machine.classList.remove('working');
                product.classList.add('fall');
            }, 800);
        }

        function openProduct() {
            // éš¨æ©Ÿé¸ä¸€å¥è©±
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            msgText.innerText = randomMsg;
            
            // é¡¯ç¤ºå¡ç‰‡
            card.classList.add('show');
            
            // é‡ç½®æ‰è½ç‰©
            product.classList.remove('fall');
        }

        function closeCard() {
            card.classList.remove('show');
            input.placeholder = "åœ¨é€™è£¡è¼¸å…¥ä½ çš„ç…©æƒ±...";
        }
    </script>
</body>
</html>
