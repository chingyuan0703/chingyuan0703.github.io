<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 1: Key & Lock Lab</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #2d3436;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
            user-select: none; /* é˜²æ­¢é¸å–æ–‡å­—å½±éŸ¿æ‹–æ›³ */
        }

        h1 { margin-bottom: 10px; }
        p { color: #b2bec3; margin-bottom: 40px; text-align: center;}

        .game-area {
            position: relative;
            width: 300px;
            height: 400px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* é–çš„æ¨£å¼ (System) */
        .lock {
            font-size: 100px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
            z-index: 1;
        }

        /* é‘°åŒ™æ¨£å¼ (Tool + Interface) */
        .key {
            font-size: 80px;
            position: absolute;
            bottom: 50px;
            cursor: grab;
            transition: transform 0.1s;
            z-index: 10;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3));
        }

        .key:active {
            cursor: grabbing;
            transform: scale(1.1);
        }

        /* è¦–è¦ºå›é¥‹æ–‡å­— */
        .feedback-text {
            position: absolute;
            top: 20px;
            font-size: 24px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
            color: #00b894;
        }

        /* æˆåŠŸç‰¹æ•ˆ */
        body.unlocked {
            background-color: #00b894; /* ç¶ è‰²èƒŒæ™¯ä»£è¡¨æˆåŠŸ */
        }
        
        .instruction {
            position: absolute;
            bottom: 20px;
            font-size: 14px;
            opacity: 0.6;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.3; }
            50% { opacity: 0.8; }
            100% { opacity: 0.3; }
        }
    </style>
</head>
<body>

    <h1>é‘°åŒ™å¯¦é©—å®¤</h1>
    <p>æ‹–æ›³é‘°åŒ™ (Tool) å°æº–é–å­” (Interface)<br>é«”é©— Feedback</p>

    <div class="game-area" id="dropZone">
        <div class="feedback-text" id="fbText">CLICK! Unlocked!</div>
        <div class="lock" id="lock">ğŸ”’</div>
        <div class="key" id="key">ğŸ—ï¸</div>
        <div class="instruction">æ‹–æ›³é‘°åŒ™å»é–‹é–</div>
    </div>

    <script>
        const key = document.getElementById('key');
        const lock = document.getElementById('lock');
        const fbText = document.getElementById('fbText');
        const dropZone = document.getElementById('dropZone');
        
        let isDragging = false;
        let startX, startY, initialLeft, initialTop;

        // æ”¯æ´æ»‘é¼ èˆ‡è§¸æ§
        key.addEventListener('mousedown', startDrag);
        key.addEventListener('touchstart', startDrag, {passive: false});

        function startDrag(e) {
            e.preventDefault();
            isDragging = true;
            
            // å–å¾—åˆå§‹ä½ç½®
            const rect = key.getBoundingClientRect();
            
            // åˆ¤æ–·æ˜¯æ»‘é¼ é‚„æ˜¯è§¸æ§
            const clientX = e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;
            const clientY = e.type === 'mousedown' ? e.clientY : e.touches[0].clientY;

            startX = clientX - rect.left;
            startY = clientY - rect.top;

            // ç¶å®šç§»å‹•èˆ‡çµæŸäº‹ä»¶
            document.addEventListener('mousemove', moveDrag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchmove', moveDrag, {passive: false});
            document.addEventListener('touchend', endDrag);
        }

        function moveDrag(e) {
            if (!isDragging) return;
            e.preventDefault();

            const clientX = e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;
            const clientY = e.type === 'mousemove' ? e.clientY : e.touches[0].clientY;

            // è·Ÿéš¨æ¸¸æ¨™
            key.style.position = 'fixed';
            key.style.left = (clientX - startX) + 'px';
            key.style.top = (clientY - startY) + 'px';
        }

        function endDrag(e) {
            if (!isDragging) return;
            isDragging = false;
            
            document.removeEventListener('mousemove', moveDrag);
            document.removeEventListener('mouseup', endDrag);
            document.removeEventListener('touchmove', moveDrag);
            document.removeEventListener('touchend', endDrag);

            checkUnlock();
        }

        function checkUnlock() {
            const keyRect = key.getBoundingClientRect();
            const lockRect = lock.getBoundingClientRect();

            // ç°¡å–®çš„ç¢°æ’æª¢æ¸¬ï¼šå¦‚æœé‘°åŒ™ä¸­å¿ƒé»é è¿‘é–çš„ä¸­å¿ƒé»
            const keyCenter = { x: keyRect.left + keyRect.width/2, y: keyRect.top + keyRect.height/2 };
            const lockCenter = { x: lockRect.left + lockRect.width/2, y: lockRect.top + lockRect.height/2 };
            
            const distance = Math.hypot(keyCenter.x - lockCenter.x, keyCenter.y - lockCenter.y);

            // è·é›¢å°æ–¼ 60px è¦–ç‚ºå°æº–
            if (distance < 60) {
                unlockSuccess();
            } else {
                resetKey();
            }
        }

        function unlockSuccess() {
            // 1. è¦–è¦º Feedback: é–æ‰“é–‹
            lock.textContent = 'ğŸ”“';
            lock.style.transform = 'scale(1.5)';
            
            // 2. æ–‡å­— Feedback
            fbText.style.opacity = '1';

            // 3. èƒŒæ™¯è®ŠåŒ– (æ°›åœ Feedback)
            document.body.classList.add('unlocked');
            
            // é‘°åŒ™æ¶ˆå¤± (å› ç‚ºå·²ç¶“æ’å…¥)
            key.style.display = 'none';
        }

        function resetKey() {
            // å¾©åŸ
            key.style.position = 'absolute';
            key.style.left = ''; 
            key.style.top = '';
            key.style.bottom = '50px'; // å›åˆ°åŸä½
        }
    </script>
</body>
</html>
